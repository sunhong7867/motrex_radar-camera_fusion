# roi_lanes.yaml
# 차선 ROI 소스(=lane_polys.json) 경로와 적용 정책
# lane_polys.json은 ROI 설정/편집 시 "자동으로 갱신"되는 파일

roi_source:
  format: json
  path: "$(find perception)/src/perception/lane_polys.json"
  # lane_polys.json 포맷은 lane_utils.py가 기대하는 구조를 따름
  # 예: { "IN1": [[u,v], ...], "IN2": [...], "OUT1": [...], "OUT2": [...] }

lane_definition:
  lane_names: ["IN1", "IN2", "OUT1", "OUT2"]
  # (선택) lane_utils에서 쓰는 키 규칙을 명시해두면 팀원 혼동 방지
  lane_state_keys:
    IN1: "in1"
    IN2: "in2"
    OUT1: "out1"
    OUT2: "out2"

policy:
  # bbox ROI 판정 기준점
  anchor_point: bbox_bottom_center     # bbox_bottom_center / bbox_center
  # 너무 작은 bbox 제거(먼 거리 노이즈)
  min_bbox_area: 1500

  # 특정 차선만 쓰는 목표면 여기에 명시
  # 예: ["IN1"] (정면 1개 차선만)
  target_lanes: ["IN1"]

selection:
  # 같은 차선/ROI 안에 여러 차량이면 어떤 걸 “선행 1대”로 잡을지
  mode: nearest_by_radar_range         # nearest_by_radar_range / largest_bbox / closest_to_center
  publish_only_one: true

debug:
  publish_roi_debug: true
  roi_debug_topic: /perception/lane_roi_debug
